{"version":3,"file":"JsonHubProtocol.js","sourceRoot":"","sources":["../../src/JsonHubProtocol.ts"],"names":[],"mappings":"AAAA,sDAAsD;AACtD,+GAA+G;AAE/G,OAAO,EAAE,iBAAiB,EAAE,MAAM,qBAAqB,CAAC;AAGxD,MAAM,CAAC,MAAM,sBAAsB,GAAW,MAAM,CAAC;AAErD,MAAM;IAAN;QAEa,SAAI,GAAW,sBAAsB,CAAC;QAEtC,SAAI,gBAAmC;IAoBpD,CAAC;IAlBG,aAAa,CAAC,KAAa;QACvB,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC;YACT,MAAM,CAAC,EAAE,CAAC;QACd,CAAC;QAED,qBAAqB;QACrB,IAAI,QAAQ,GAAG,iBAAiB,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAC9C,IAAI,WAAW,GAAG,EAAE,CAAC;QACrB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;YACvC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC9C,CAAC;QAED,MAAM,CAAC,WAAW,CAAC;IACvB,CAAC;IAED,YAAY,CAAC,OAAmB;QAC5B,MAAM,CAAC,iBAAiB,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAC;IAC5D,CAAC;CACJ","sourcesContent":["// Copyright (c) .NET Foundation. All rights reserved.\n// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.\n\nimport { TextMessageFormat } from \"./TextMessageFormat\";\nimport { IHubProtocol, ProtocolType, HubMessage } from \"./IHubProtocol\";\n\nexport const JSON_HUB_PROTOCOL_NAME: string = \"json\";\n\nexport class JsonHubProtocol implements IHubProtocol {\n\n    readonly name: string = JSON_HUB_PROTOCOL_NAME;\n\n    readonly type: ProtocolType = ProtocolType.Text;\n\n    parseMessages(input: string): HubMessage[] {\n        if (!input) {\n            return [];\n        }\n\n        // Parse the messages\n        let messages = TextMessageFormat.parse(input);\n        let hubMessages = [];\n        for (var i = 0; i < messages.length; ++i) {\n            hubMessages.push(JSON.parse(messages[i]));\n        }\n\n        return hubMessages;\n    }\n\n    writeMessage(message: HubMessage): string {\n        return TextMessageFormat.write(JSON.stringify(message));\n    }\n}"]}